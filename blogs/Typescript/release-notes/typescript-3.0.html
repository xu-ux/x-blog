<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>TypeScript 3.0</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Just playing around">
    
    <link rel="preload" href="/x-blog/assets/css/0.styles.0df86336.css" as="style"><link rel="preload" href="/x-blog/assets/js/app.9c68ef6c.js" as="script"><link rel="preload" href="/x-blog/assets/js/19.464eb243.js" as="script"><link rel="preload" href="/x-blog/assets/js/1.9c3441ec.js" as="script"><link rel="preload" href="/x-blog/assets/js/2.c1e8940e.js" as="script"><link rel="preload" href="/x-blog/assets/js/118.73455c6e.js" as="script"><link rel="prefetch" href="/x-blog/assets/js/10.832ad187.js"><link rel="prefetch" href="/x-blog/assets/js/100.3cb1a715.js"><link rel="prefetch" href="/x-blog/assets/js/101.18dc221a.js"><link rel="prefetch" href="/x-blog/assets/js/102.7f46e382.js"><link rel="prefetch" href="/x-blog/assets/js/103.ac69336f.js"><link rel="prefetch" href="/x-blog/assets/js/104.1b6bdb96.js"><link rel="prefetch" href="/x-blog/assets/js/105.54bb5017.js"><link rel="prefetch" href="/x-blog/assets/js/106.d6aba3f3.js"><link rel="prefetch" href="/x-blog/assets/js/107.71ba8a22.js"><link rel="prefetch" href="/x-blog/assets/js/108.7e697b37.js"><link rel="prefetch" href="/x-blog/assets/js/109.441c070d.js"><link rel="prefetch" href="/x-blog/assets/js/11.85b50557.js"><link rel="prefetch" href="/x-blog/assets/js/110.06545e85.js"><link rel="prefetch" href="/x-blog/assets/js/111.cf050824.js"><link rel="prefetch" href="/x-blog/assets/js/112.82af01d1.js"><link rel="prefetch" href="/x-blog/assets/js/113.ae8a00a9.js"><link rel="prefetch" href="/x-blog/assets/js/114.d6a706ed.js"><link rel="prefetch" href="/x-blog/assets/js/115.68b1e216.js"><link rel="prefetch" href="/x-blog/assets/js/116.0acd7e5a.js"><link rel="prefetch" href="/x-blog/assets/js/117.f1510643.js"><link rel="prefetch" href="/x-blog/assets/js/119.74beb724.js"><link rel="prefetch" href="/x-blog/assets/js/12.ae5f155f.js"><link rel="prefetch" href="/x-blog/assets/js/120.e57631c3.js"><link rel="prefetch" href="/x-blog/assets/js/121.6520150a.js"><link rel="prefetch" href="/x-blog/assets/js/122.4d052d48.js"><link rel="prefetch" href="/x-blog/assets/js/123.893c8d41.js"><link rel="prefetch" href="/x-blog/assets/js/124.fe66391c.js"><link rel="prefetch" href="/x-blog/assets/js/125.f4ed34ea.js"><link rel="prefetch" href="/x-blog/assets/js/126.a9454608.js"><link rel="prefetch" href="/x-blog/assets/js/127.302ccf33.js"><link rel="prefetch" href="/x-blog/assets/js/128.43e9d7ac.js"><link rel="prefetch" href="/x-blog/assets/js/129.b9bda05e.js"><link rel="prefetch" href="/x-blog/assets/js/13.fcbb7156.js"><link rel="prefetch" href="/x-blog/assets/js/130.423a8b3e.js"><link rel="prefetch" href="/x-blog/assets/js/131.ad9e9958.js"><link rel="prefetch" href="/x-blog/assets/js/132.7419dafe.js"><link rel="prefetch" href="/x-blog/assets/js/133.020ad712.js"><link rel="prefetch" href="/x-blog/assets/js/134.0512cbd0.js"><link rel="prefetch" href="/x-blog/assets/js/135.cc3c6f8d.js"><link rel="prefetch" href="/x-blog/assets/js/136.3fb3987d.js"><link rel="prefetch" href="/x-blog/assets/js/137.beb02df1.js"><link rel="prefetch" href="/x-blog/assets/js/138.7d1a9567.js"><link rel="prefetch" href="/x-blog/assets/js/139.962affa7.js"><link rel="prefetch" href="/x-blog/assets/js/14.1227ecb5.js"><link rel="prefetch" href="/x-blog/assets/js/140.45b5f831.js"><link rel="prefetch" href="/x-blog/assets/js/141.96deea23.js"><link rel="prefetch" href="/x-blog/assets/js/142.d6b5fe14.js"><link rel="prefetch" href="/x-blog/assets/js/143.980168c3.js"><link rel="prefetch" href="/x-blog/assets/js/144.db1d6f2f.js"><link rel="prefetch" href="/x-blog/assets/js/145.4ccd61c6.js"><link rel="prefetch" href="/x-blog/assets/js/146.2054a16b.js"><link rel="prefetch" href="/x-blog/assets/js/147.14dfc258.js"><link rel="prefetch" href="/x-blog/assets/js/148.d1d1d4f6.js"><link rel="prefetch" href="/x-blog/assets/js/149.3f316ce5.js"><link rel="prefetch" href="/x-blog/assets/js/15.f1c9f9e4.js"><link rel="prefetch" href="/x-blog/assets/js/150.13d25385.js"><link rel="prefetch" href="/x-blog/assets/js/16.83ffa7f5.js"><link rel="prefetch" href="/x-blog/assets/js/17.0b14fb7c.js"><link rel="prefetch" href="/x-blog/assets/js/18.84fd9580.js"><link rel="prefetch" href="/x-blog/assets/js/20.959facf9.js"><link rel="prefetch" href="/x-blog/assets/js/21.e4578065.js"><link rel="prefetch" href="/x-blog/assets/js/22.b3525e35.js"><link rel="prefetch" href="/x-blog/assets/js/23.8f0fdba6.js"><link rel="prefetch" href="/x-blog/assets/js/24.deb12f90.js"><link rel="prefetch" href="/x-blog/assets/js/25.a9ed162d.js"><link rel="prefetch" href="/x-blog/assets/js/26.930767d0.js"><link rel="prefetch" href="/x-blog/assets/js/27.cab70cbe.js"><link rel="prefetch" href="/x-blog/assets/js/28.66157b3b.js"><link rel="prefetch" href="/x-blog/assets/js/29.d7dff74a.js"><link rel="prefetch" href="/x-blog/assets/js/30.7d9f9a2c.js"><link rel="prefetch" href="/x-blog/assets/js/31.7dc3378f.js"><link rel="prefetch" href="/x-blog/assets/js/32.8658bbc5.js"><link rel="prefetch" href="/x-blog/assets/js/33.879f5c3f.js"><link rel="prefetch" href="/x-blog/assets/js/34.242622d8.js"><link rel="prefetch" href="/x-blog/assets/js/35.dd613e7e.js"><link rel="prefetch" href="/x-blog/assets/js/36.0687e131.js"><link rel="prefetch" href="/x-blog/assets/js/37.b90f4fa8.js"><link rel="prefetch" href="/x-blog/assets/js/38.f1cf1eaf.js"><link rel="prefetch" href="/x-blog/assets/js/39.952ceeb1.js"><link rel="prefetch" href="/x-blog/assets/js/4.d05000ea.js"><link rel="prefetch" href="/x-blog/assets/js/40.6f2ba2f1.js"><link rel="prefetch" href="/x-blog/assets/js/41.c010783f.js"><link rel="prefetch" href="/x-blog/assets/js/42.6709bd93.js"><link rel="prefetch" href="/x-blog/assets/js/43.b922dd87.js"><link rel="prefetch" href="/x-blog/assets/js/44.37a96399.js"><link rel="prefetch" href="/x-blog/assets/js/45.1f85c897.js"><link rel="prefetch" href="/x-blog/assets/js/46.ac964771.js"><link rel="prefetch" href="/x-blog/assets/js/47.efba2421.js"><link rel="prefetch" href="/x-blog/assets/js/48.27615032.js"><link rel="prefetch" href="/x-blog/assets/js/49.d2fccbe7.js"><link rel="prefetch" href="/x-blog/assets/js/5.04788c13.js"><link rel="prefetch" href="/x-blog/assets/js/50.ebd5c36b.js"><link rel="prefetch" href="/x-blog/assets/js/51.c600a722.js"><link rel="prefetch" href="/x-blog/assets/js/52.c1699372.js"><link rel="prefetch" href="/x-blog/assets/js/53.52998668.js"><link rel="prefetch" href="/x-blog/assets/js/54.c2ff71a1.js"><link rel="prefetch" href="/x-blog/assets/js/55.b9ebbe5c.js"><link rel="prefetch" href="/x-blog/assets/js/56.018b04db.js"><link rel="prefetch" href="/x-blog/assets/js/57.738fec6c.js"><link rel="prefetch" href="/x-blog/assets/js/58.098150cb.js"><link rel="prefetch" href="/x-blog/assets/js/59.4fbd0b8f.js"><link rel="prefetch" href="/x-blog/assets/js/6.29ff4292.js"><link rel="prefetch" href="/x-blog/assets/js/60.c11e9e38.js"><link rel="prefetch" href="/x-blog/assets/js/61.d4f4672b.js"><link rel="prefetch" href="/x-blog/assets/js/62.2a66d503.js"><link rel="prefetch" href="/x-blog/assets/js/63.6564b213.js"><link rel="prefetch" href="/x-blog/assets/js/64.c4f8275b.js"><link rel="prefetch" href="/x-blog/assets/js/65.461392d9.js"><link rel="prefetch" href="/x-blog/assets/js/66.6a56e2e2.js"><link rel="prefetch" href="/x-blog/assets/js/67.7d795035.js"><link rel="prefetch" href="/x-blog/assets/js/68.66333e23.js"><link rel="prefetch" href="/x-blog/assets/js/69.246ea4ba.js"><link rel="prefetch" href="/x-blog/assets/js/7.8dcf87b8.js"><link rel="prefetch" href="/x-blog/assets/js/70.b90ffb0e.js"><link rel="prefetch" href="/x-blog/assets/js/71.9d5e280c.js"><link rel="prefetch" href="/x-blog/assets/js/72.f9daadfc.js"><link rel="prefetch" href="/x-blog/assets/js/73.6372ef72.js"><link rel="prefetch" href="/x-blog/assets/js/74.92c0f9ab.js"><link rel="prefetch" href="/x-blog/assets/js/75.5c1cee69.js"><link rel="prefetch" href="/x-blog/assets/js/76.96f4091e.js"><link rel="prefetch" href="/x-blog/assets/js/77.5c61185a.js"><link rel="prefetch" href="/x-blog/assets/js/78.3d0582e9.js"><link rel="prefetch" href="/x-blog/assets/js/79.e1726c3b.js"><link rel="prefetch" href="/x-blog/assets/js/8.00d7100b.js"><link rel="prefetch" href="/x-blog/assets/js/80.13fb02f1.js"><link rel="prefetch" href="/x-blog/assets/js/81.080d37e3.js"><link rel="prefetch" href="/x-blog/assets/js/82.244d23eb.js"><link rel="prefetch" href="/x-blog/assets/js/83.baab1b70.js"><link rel="prefetch" href="/x-blog/assets/js/84.cd9a7d74.js"><link rel="prefetch" href="/x-blog/assets/js/85.2ff21a25.js"><link rel="prefetch" href="/x-blog/assets/js/86.4e841a70.js"><link rel="prefetch" href="/x-blog/assets/js/87.8d424ecf.js"><link rel="prefetch" href="/x-blog/assets/js/88.3f470344.js"><link rel="prefetch" href="/x-blog/assets/js/89.d3d009d5.js"><link rel="prefetch" href="/x-blog/assets/js/9.2db50995.js"><link rel="prefetch" href="/x-blog/assets/js/90.965c385b.js"><link rel="prefetch" href="/x-blog/assets/js/91.69cc52e3.js"><link rel="prefetch" href="/x-blog/assets/js/92.ee64f754.js"><link rel="prefetch" href="/x-blog/assets/js/93.6ae9dfde.js"><link rel="prefetch" href="/x-blog/assets/js/94.5806dff1.js"><link rel="prefetch" href="/x-blog/assets/js/95.f878e9c5.js"><link rel="prefetch" href="/x-blog/assets/js/96.7ea69021.js"><link rel="prefetch" href="/x-blog/assets/js/97.374b3951.js"><link rel="prefetch" href="/x-blog/assets/js/98.d0b400a1.js"><link rel="prefetch" href="/x-blog/assets/js/99.f871801d.js">
    <link rel="stylesheet" href="/x-blog/assets/css/0.styles.0df86336.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/x-blog/" class="home-link router-link-active"><img src="/x-blog/img/logoS.png" alt="" class="logo"> <!----></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/x-blog/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/x-blog/guide/" class="nav-link">
  专栏
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="教程" class="dropdown-title"><span class="title">教程</span> <span class="arrow down"></span></button> <button type="button" aria-label="教程" class="mobile-dropdown-title"><span class="title">教程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/x-blog/blogs/GithubActions/" class="nav-link">
  GithubAction
</a></li><li class="dropdown-item"><!----> <a href="/x-blog/blogs/VuePress/" class="nav-link">
  Vuepress
</a></li><li class="dropdown-item"><!----> <a href="/x-blog/blogs/Other/" class="nav-link">
  其他
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="书籍" class="dropdown-title"><span class="title">书籍</span> <span class="arrow down"></span></button> <button type="button" aria-label="书籍" class="mobile-dropdown-title"><span class="title">书籍</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/x-blog/blogs/Typescript/" class="nav-link router-link-active">
  《Typescript》
</a></li></ul></div></div><div class="nav-item"><a href="https://xu-ux.github.io/note" target="_blank" rel="noopener noreferrer" class="nav-link external">
  笔记
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/xu-ux/x-blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    仓库
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/x-blog/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/x-blog/guide/" class="nav-link">
  专栏
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="教程" class="dropdown-title"><span class="title">教程</span> <span class="arrow down"></span></button> <button type="button" aria-label="教程" class="mobile-dropdown-title"><span class="title">教程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/x-blog/blogs/GithubActions/" class="nav-link">
  GithubAction
</a></li><li class="dropdown-item"><!----> <a href="/x-blog/blogs/VuePress/" class="nav-link">
  Vuepress
</a></li><li class="dropdown-item"><!----> <a href="/x-blog/blogs/Other/" class="nav-link">
  其他
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="书籍" class="dropdown-title"><span class="title">书籍</span> <span class="arrow down"></span></button> <button type="button" aria-label="书籍" class="mobile-dropdown-title"><span class="title">书籍</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/x-blog/blogs/Typescript/" class="nav-link router-link-active">
  《Typescript》
</a></li></ul></div></div><div class="nav-item"><a href="https://xu-ux.github.io/note" target="_blank" rel="noopener noreferrer" class="nav-link external">
  笔记
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/xu-ux/x-blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    仓库
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Release Notes</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/x-blog/blogs/Typescript/release-notes/typescript-2.8.html" class="sidebar-link">TypeScript 2.8</a></li><li><a href="/x-blog/blogs/Typescript/release-notes/" aria-current="page" class="sidebar-link">新增功能</a></li><li><a href="/x-blog/blogs/Typescript/release-notes/typescript-1.3.html" class="sidebar-link">TypeScript 1.3</a></li><li><a href="/x-blog/blogs/Typescript/release-notes/typescript-1.4.html" class="sidebar-link">TypeScript 1.4</a></li><li><a href="/x-blog/blogs/Typescript/release-notes/typescript-1.5.html" class="sidebar-link">TypeScript 1.5</a></li><li><a href="/x-blog/blogs/Typescript/release-notes/typescript-1.6.html" class="sidebar-link">TypeScript 1.6</a></li><li><a href="/x-blog/blogs/Typescript/release-notes/typescript-1.7.html" class="sidebar-link">TypeScript 1.7</a></li><li><a href="/x-blog/blogs/Typescript/release-notes/typescript-1.8.html" class="sidebar-link">TypeScript 1.8</a></li><li><a href="/x-blog/blogs/Typescript/release-notes/typescript-2.0.html" class="sidebar-link">TypeScript 2.0</a></li><li><a href="/x-blog/blogs/Typescript/release-notes/typescript-2.1.html" class="sidebar-link">TypeScript 2.1</a></li><li><a href="/x-blog/blogs/Typescript/release-notes/typescript-2.2.html" class="sidebar-link">TypeScript 2.2</a></li><li><a href="/x-blog/blogs/Typescript/release-notes/typescript-2.3.html" class="sidebar-link">TypeScript 2.3</a></li><li><a href="/x-blog/blogs/Typescript/release-notes/typescript-2.4.html" class="sidebar-link">TypeScript 2.4</a></li><li><a href="/x-blog/blogs/Typescript/release-notes/typescript-2.5.html" class="sidebar-link">TypeScript 2.5</a></li><li><a href="/x-blog/blogs/Typescript/release-notes/typescript-2.6.html" class="sidebar-link">TypeScript 2.6</a></li><li><a href="/x-blog/blogs/Typescript/release-notes/typescript-2.7.html" class="sidebar-link">TypeScript 2.7</a></li><li><a href="/x-blog/blogs/Typescript/release-notes/typescript-1.1.html" class="sidebar-link">TypeScript 1.1</a></li><li><a href="/x-blog/blogs/Typescript/release-notes/typescript-2.9.html" class="sidebar-link">TypeScript 2.9</a></li><li><a href="/x-blog/blogs/Typescript/release-notes/typescript-3.0.html" aria-current="page" class="active sidebar-link">TypeScript 3.0</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/x-blog/blogs/Typescript/release-notes/typescript-3.0.html#工程引用" class="sidebar-link">工程引用</a></li><li class="sidebar-sub-header"><a href="/x-blog/blogs/Typescript/release-notes/typescript-3.0.html#剩余参数和展开表达式里的元组" class="sidebar-link">剩余参数和展开表达式里的元组</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/x-blog/blogs/Typescript/release-notes/typescript-3.0.html#带元组类型的剩余参数" class="sidebar-link">带元组类型的剩余参数</a></li><li class="sidebar-sub-header"><a href="/x-blog/blogs/Typescript/release-notes/typescript-3.0.html#带有元组类型的展开表达式" class="sidebar-link">带有元组类型的展开表达式</a></li><li class="sidebar-sub-header"><a href="/x-blog/blogs/Typescript/release-notes/typescript-3.0.html#泛型剩余参数" class="sidebar-link">泛型剩余参数</a></li><li class="sidebar-sub-header"><a href="/x-blog/blogs/Typescript/release-notes/typescript-3.0.html#元组类型里的可选元素" class="sidebar-link">元组类型里的可选元素</a></li><li class="sidebar-sub-header"><a href="/x-blog/blogs/Typescript/release-notes/typescript-3.0.html#元组类型里的剩余元素" class="sidebar-link">元组类型里的剩余元素</a></li></ul></li><li class="sidebar-sub-header"><a href="/x-blog/blogs/Typescript/release-notes/typescript-3.0.html#新的unknown类型" class="sidebar-link">新的unknown类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/x-blog/blogs/Typescript/release-notes/typescript-3.0.html#例子-4" class="sidebar-link">例子</a></li></ul></li><li class="sidebar-sub-header"><a href="/x-blog/blogs/Typescript/release-notes/typescript-3.0.html#在jsx里支持defaultprops" class="sidebar-link">在JSX里支持defaultProps</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/x-blog/blogs/Typescript/release-notes/typescript-3.0.html#说明" class="sidebar-link">说明</a></li></ul></li><li class="sidebar-sub-header"><a href="/x-blog/blogs/Typescript/release-notes/typescript-3.0.html#reference-lib-指令" class="sidebar-link">/// &lt;reference lib=&quot;...&quot; /&gt;指令</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/x-blog/blogs/Typescript/release-notes/typescript-3.0.html#例子-5" class="sidebar-link">例子</a></li></ul></li></ul></li><li><a href="/x-blog/blogs/Typescript/release-notes/typescript-3.1.html" class="sidebar-link">TypeScript 3.1</a></li><li><a href="/x-blog/blogs/Typescript/release-notes/typescript-3.2.html" class="sidebar-link">TypeScript 3.2</a></li><li><a href="/x-blog/blogs/Typescript/release-notes/typescript-3.3.html" class="sidebar-link">TypeScript 3.3</a></li><li><a href="/x-blog/blogs/Typescript/release-notes/typescript-3.4.html" class="sidebar-link">TypeScript 3.4</a></li><li><a href="/x-blog/blogs/Typescript/release-notes/typescript-3.5.html" class="sidebar-link">TypeScript 3.5</a></li><li><a href="/x-blog/blogs/Typescript/release-notes/typescript-3.6.html" class="sidebar-link">TypeScript 3.6</a></li><li><a href="/x-blog/blogs/Typescript/release-notes/typescript-3.7.html" class="sidebar-link">TypeScript 3.7</a></li><li><a href="/x-blog/blogs/Typescript/release-notes/typescript-3.8.html" class="sidebar-link">TypeScript 3.8</a></li><li><a href="/x-blog/blogs/Typescript/release-notes/typescript-3.9.html" class="sidebar-link">改进类型推断和Promise.all</a></li><li><a href="/x-blog/blogs/Typescript/release-notes/typescript-4.0.html" class="sidebar-link">可变参元组类型</a></li><li><a href="/x-blog/blogs/Typescript/release-notes/typescript-4.1.html" class="sidebar-link">模版字面量类型</a></li><li><a href="/x-blog/blogs/Typescript/release-notes/typescript-4.2.html" class="sidebar-link">更智能地保留类型别名</a></li><li><a href="/x-blog/blogs/Typescript/release-notes/typescript-4.3.html" class="sidebar-link">拆分属性的写入类型</a></li><li><a href="/x-blog/blogs/Typescript/release-notes/typescript-4.4.html" class="sidebar-link">针对条件表达式和判别式的别名引用进行控制流分析</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="typescript-3-0"><a href="#typescript-3-0" class="header-anchor">#</a> TypeScript 3.0</h1> <h2 id="工程引用"><a href="#工程引用" class="header-anchor">#</a> 工程引用</h2> <p>TypeScript 3.0 引入了一个叫做工程引用的新概念。工程引用允许TypeScript工程依赖于其它TypeScript工程 - 特别要提的是允许<code>tsconfig.json</code>文件引用其它<code>tsconfig.json</code>文件。当指明了这些依赖后，就可以方便地将代码分割成单独的小工程，有助于TypeScript（以及周边的工具）了解构建顺序和输出结构。</p> <p>TypeScript 3.0 还引入了一种新的<code>tsc</code>模式，即<code>--build</code>标记，它与工程引用同时运用可以加速构建TypeScript。</p> <p>相关详情请阅读<a href="/x-blog/blogs/Typescript/project-config/project-references.html">工程引用手册</a>。</p> <h2 id="剩余参数和展开表达式里的元组"><a href="#剩余参数和展开表达式里的元组" class="header-anchor">#</a> 剩余参数和展开表达式里的元组</h2> <p>TypeScript 3.0 增加了支持以元组类型与函数参数列表进行交互的能力。 如下：</p> <ul><li><a href="/x-blog/blogs/Typescript/release-notes/typescript-3.0.html#rest-parameters-with-tuple-types">将带有元组类型的剩余参数扩展为离散参数</a></li> <li><a href="/x-blog/blogs/Typescript/release-notes/typescript-3.0.html#spread-expressions-with-tuple-types">将带有元组类型的展开表达式扩展为离散参数</a></li> <li><a href="/x-blog/blogs/Typescript/release-notes/typescript-3.0.html#generic-rest-parameters">泛型剩余参数以及相应的元组类型推断</a></li> <li><a href="/x-blog/blogs/Typescript/release-notes/typescript-3.0.html#optional-elements-in-tuple-types">元组类型里的可选元素</a></li> <li><a href="/x-blog/blogs/Typescript/release-notes/typescript-3.0.html#rest-elements-in-tuple-types">元组类型里的剩余元素</a></li></ul> <p>有了这些特性后，便有可能将转换函数和它们参数列表的高阶函数变为强类型的。</p> <h3 id="带元组类型的剩余参数"><a href="#带元组类型的剩余参数" class="header-anchor">#</a> 带元组类型的剩余参数</h3> <p>当剩余参数里有元组类型时，元组类型被扩展为离散参数序列。 例如，如下两个声明是等价的：</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">boolean</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span>args_0<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> args_1<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> args_2<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="带有元组类型的展开表达式"><a href="#带有元组类型的展开表达式" class="header-anchor">#</a> 带有元组类型的展开表达式</h3> <p>在函数调用中，若最后一个参数是元组类型的展开表达式，那么这个展开表达式相当于元组元素类型的离散参数序列。</p> <p>因此，下面的调用都是等价的：</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> args<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">boolean</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">42</span><span class="token punctuation">,</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">,</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">foo</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> args<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> args<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="泛型剩余参数"><a href="#泛型剩余参数" class="header-anchor">#</a> 泛型剩余参数</h3> <p>剩余参数允许带有泛型类型，这个泛型类型被限制为是一个数组类型，类型推断系统能够推断这类泛型剩余参数里的元组类型。这样就可以进行高阶捕获和展开部分参数列表:</p> <h4 id="例子"><a href="#例子" class="header-anchor">#</a> 例子</h4> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token generic-function"><span class="token function">bind</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">V</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token function-variable function">f</span><span class="token operator">:</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token operator">:</span> <span class="token constant">U</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">V</span><span class="token punctuation">,</span> x<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token constant">U</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">V</span><span class="token punctuation">;</span>

<span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">f3</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> z<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> f2 <span class="token operator">=</span> <span class="token function">bind</span><span class="token punctuation">(</span>f3<span class="token punctuation">,</span> <span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// (y: string, z: boolean) =&gt; void</span>
<span class="token keyword">const</span> f1 <span class="token operator">=</span> <span class="token function">bind</span><span class="token punctuation">(</span>f2<span class="token punctuation">,</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// (z: boolean) =&gt; void</span>
<span class="token keyword">const</span> f0 <span class="token operator">=</span> <span class="token function">bind</span><span class="token punctuation">(</span>f1<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// () =&gt; void</span>

<span class="token function">f3</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">,</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">f2</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">f1</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">f0</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>上例的<code>f2</code>声明，类型推断可以推断出<code>number</code>，<code>[string, boolean]</code>和<code>void</code>做为<code>T</code>，<code>U</code>和<code>V</code>。</p> <p>注意，如果元组类型是从参数序列中推断出来的，之后又扩展成参数列表，就像<code>U</code>那样，原来的参数名称会被用在扩展中（然而，这个名字没有语义上的意义且是察觉不到的）。</p> <h3 id="元组类型里的可选元素"><a href="#元组类型里的可选元素" class="header-anchor">#</a> 元组类型里的可选元素</h3> <p>元组类型现在允许在其元素类型上使用<code>?</code>后缀，表示这个元素是可选的：</p> <h4 id="例子-2"><a href="#例子-2" class="header-anchor">#</a> 例子</h4> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">let</span> t<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token operator">?</span><span class="token punctuation">,</span> <span class="token builtin">boolean</span><span class="token operator">?</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
t <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">42</span><span class="token punctuation">,</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
t <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">42</span><span class="token punctuation">,</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
t <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">42</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>在<code>--strictNullChecks</code>模式下，<code>?</code>修饰符会自动地在元素类型中包含<code>undefined</code>，类似于可选参数。</p> <p>在元组类型的一个元素类型上使用<code>?</code>后缀修饰符来把它标记为可忽略的元素，且它右侧所有元素也同时带有了<code>?</code>修饰符。</p> <p>当剩余参数推断为元组类型时，源码中的可选参数在推断出的类型里成为了可选元组元素。</p> <p>带有可选元素的元组类型的<code>length</code>属性是表示可能长度的数字字面量类型的联合类型。 例如，<code>[number, string?, boolean?]</code>元组类型的<code>length</code>属性的类型是<code>1 | 2 | 3</code>。</p> <h3 id="元组类型里的剩余元素"><a href="#元组类型里的剩余元素" class="header-anchor">#</a> 元组类型里的剩余元素</h3> <p>元组类型里最后一个元素可以是剩余元素，形式为<code>...X</code>，这里<code>X</code>是数组类型。 剩余元素代表元组类型是开放的，可以有零个或多个额外的元素。 例如，<code>[number, ...string[]]</code>表示带有一个<code>number</code>元素和任意数量<code>string</code>类型元素的元组类型。</p> <h4 id="例子-3"><a href="#例子-3" class="header-anchor">#</a> 例子</h4> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">tuple</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> args<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> numbers<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">getArrayOfNumbers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> t1 <span class="token operator">=</span> <span class="token function">tuple</span><span class="token punctuation">(</span><span class="token string">&quot;foo&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// [string, number, boolean]</span>
<span class="token keyword">const</span> t2 <span class="token operator">=</span> <span class="token function">tuple</span><span class="token punctuation">(</span><span class="token string">&quot;bar&quot;</span><span class="token punctuation">,</span> <span class="token operator">...</span>numbers<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// [string, ...number[]]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>这个带有剩余元素的元组类型的<code>length</code>属性类型是<code>number</code>。</p> <h2 id="新的unknown类型"><a href="#新的unknown类型" class="header-anchor">#</a> 新的<code>unknown</code>类型</h2> <p>TypeScript 3.0引入了一个顶级的<code>unknown</code>类型。 对照于<code>any</code>，<code>unknown</code>是类型安全的。 任何值都可以赋给<code>unknown</code>，但是当没有类型断言或基于控制流的类型细化时<code>unknown</code>不可以赋值给其它类型，除了它自己和<code>any</code>外。 同样地，在<code>unknown</code>没有被断言或细化到一个确切类型之前，是不允许在其上进行任何操作的。</p> <h3 id="例子-4"><a href="#例子-4" class="header-anchor">#</a> 例子</h3> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// In an intersection everything absorbs unknown</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T00</span></span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token operator">&amp;</span> <span class="token keyword">null</span><span class="token punctuation">;</span>  <span class="token comment">// null</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T01</span></span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token operator">&amp;</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>  <span class="token comment">// undefined</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T02</span></span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token operator">&amp;</span> <span class="token keyword">null</span> <span class="token operator">&amp;</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>  <span class="token comment">// null &amp; undefined (which becomes never)</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T03</span></span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token operator">&amp;</span> <span class="token builtin">string</span><span class="token punctuation">;</span>  <span class="token comment">// string</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T04</span></span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token operator">&amp;</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// string[]</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T05</span></span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token operator">&amp;</span> <span class="token builtin">unknown</span><span class="token punctuation">;</span>  <span class="token comment">// unknown</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T06</span></span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token operator">&amp;</span> <span class="token builtin">any</span><span class="token punctuation">;</span>  <span class="token comment">// any</span>

<span class="token comment">// In a union an unknown absorbs everything</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T10</span></span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">;</span>  <span class="token comment">// unknown</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T11</span></span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>  <span class="token comment">// unknown</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T12</span></span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>  <span class="token comment">// unknown</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T13</span></span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">;</span>  <span class="token comment">// unknown</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T14</span></span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// unknown</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T15</span></span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token operator">|</span> <span class="token builtin">unknown</span><span class="token punctuation">;</span>  <span class="token comment">// unknown</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T16</span></span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token operator">|</span> <span class="token builtin">any</span><span class="token punctuation">;</span>  <span class="token comment">// any</span>

<span class="token comment">// Type variable and unknown in union and intersection</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T20</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token operator">&amp;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// T &amp; {}</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T21</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token operator">|</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// T | {}</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T22</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token operator">&amp;</span> <span class="token builtin">unknown</span><span class="token punctuation">;</span>  <span class="token comment">// T</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T23</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token operator">|</span> <span class="token builtin">unknown</span><span class="token punctuation">;</span>  <span class="token comment">// unknown</span>

<span class="token comment">// unknown in conditional types</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T30</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token builtin">unknown</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">T</span></span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  <span class="token comment">// Deferred</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T31</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">unknown</span></span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  <span class="token comment">// Deferred (so it distributes)</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T32</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token builtin">never</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">T</span></span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  <span class="token comment">// true</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T33</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">never</span></span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  <span class="token comment">// Deferred</span>

<span class="token comment">// keyof unknown</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T40</span></span> <span class="token operator">=</span> <span class="token keyword">keyof</span> <span class="token builtin">any</span><span class="token punctuation">;</span>  <span class="token comment">// string | number | symbol</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T41</span></span> <span class="token operator">=</span> <span class="token keyword">keyof</span> <span class="token builtin">unknown</span><span class="token punctuation">;</span>  <span class="token comment">// never</span>

<span class="token comment">// Only equality operators are allowed with unknown</span>

<span class="token keyword">function</span> <span class="token function">f10</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    x <span class="token operator">==</span> <span class="token number">5</span><span class="token punctuation">;</span>
    x <span class="token operator">!==</span> <span class="token number">10</span><span class="token punctuation">;</span>
    x <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token comment">// Error</span>
    x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token comment">// Error</span>
    x <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>  <span class="token comment">// Error</span>
    <span class="token operator">-</span>x<span class="token punctuation">;</span>  <span class="token comment">// Error</span>
    <span class="token operator">+</span>x<span class="token punctuation">;</span>  <span class="token comment">// Error</span>
<span class="token punctuation">}</span>

<span class="token comment">// No property accesses, element accesses, or function calls</span>

<span class="token keyword">function</span> <span class="token function">f11</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    x<span class="token punctuation">.</span>foo<span class="token punctuation">;</span>  <span class="token comment">// Error</span>
    x<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// Error</span>
    <span class="token function">x</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Error</span>
    <span class="token keyword">new</span> <span class="token class-name">x</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Error</span>
<span class="token punctuation">}</span>

<span class="token comment">// typeof, instanceof, and user defined type predicates</span>

<span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">isFunction</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">)</span><span class="token operator">:</span> x <span class="token keyword">is</span> <span class="token builtin">Function</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">f20</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> x <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> x <span class="token operator">===</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        x<span class="token punctuation">;</span>  <span class="token comment">// string | number</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token keyword">instanceof</span> <span class="token class-name">Error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        x<span class="token punctuation">;</span>  <span class="token comment">// Error</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isFunction</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        x<span class="token punctuation">;</span>  <span class="token comment">// Function</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Homomorphic mapped type over unknown</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T50</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T51</span></span> <span class="token operator">=</span> <span class="token constant">T50</span><span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>  <span class="token comment">// { [x: string]: number }</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T52</span></span> <span class="token operator">=</span> <span class="token constant">T50</span><span class="token operator">&lt;</span><span class="token builtin">unknown</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>  <span class="token comment">// {}</span>

<span class="token comment">// Anything is assignable to unknown</span>

<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">f21</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>pAny<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> pNever<span class="token operator">:</span> <span class="token builtin">never</span><span class="token punctuation">,</span> pT<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> x<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">;</span>
    x <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
    x <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">;</span>
    x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    x <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    x <span class="token operator">=</span> x<span class="token punctuation">;</span>
    x <span class="token operator">=</span> pAny<span class="token punctuation">;</span>
    x <span class="token operator">=</span> pNever<span class="token punctuation">;</span>
    x <span class="token operator">=</span> pT<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// unknown assignable only to itself and any</span>

<span class="token keyword">function</span> <span class="token function">f22</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> v1<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>
    <span class="token keyword">let</span> v2<span class="token operator">:</span> <span class="token builtin">unknown</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>
    <span class="token keyword">let</span> v3<span class="token operator">:</span> object <span class="token operator">=</span> x<span class="token punctuation">;</span>  <span class="token comment">// Error</span>
    <span class="token keyword">let</span> v4<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>  <span class="token comment">// Error</span>
    <span class="token keyword">let</span> v5<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>  <span class="token comment">// Error</span>
    <span class="token keyword">let</span> v6<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>  <span class="token comment">// Error</span>
    <span class="token keyword">let</span> v7<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">|</span> <span class="token keyword">undefined</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>  <span class="token comment">// Error</span>
<span class="token punctuation">}</span>

<span class="token comment">// Type parameter 'T extends unknown' not related to object</span>

<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">f23</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">unknown</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> y<span class="token operator">:</span> object <span class="token operator">=</span> x<span class="token punctuation">;</span>  <span class="token comment">// Error</span>
<span class="token punctuation">}</span>

<span class="token comment">// Anything but primitive assignable to { [x: string]: unknown }</span>

<span class="token keyword">function</span> <span class="token function">f24</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span>x<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">unknown</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    x <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    x <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    x <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>  <span class="token comment">// Error</span>
<span class="token punctuation">}</span>

<span class="token comment">// Locals of type unknown always considered initialized</span>

<span class="token keyword">function</span> <span class="token function">f25</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> x<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> y <span class="token operator">=</span> x<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Spread of unknown causes result to be unknown</span>

<span class="token keyword">function</span> <span class="token function">f26</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">,</span> z<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> o1 <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token number">42</span><span class="token punctuation">,</span> <span class="token operator">...</span>x <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// { a: number }</span>
    <span class="token keyword">let</span> o2 <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token number">42</span><span class="token punctuation">,</span> <span class="token operator">...</span>x<span class="token punctuation">,</span> <span class="token operator">...</span>y <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// unknown</span>
    <span class="token keyword">let</span> o3 <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token number">42</span><span class="token punctuation">,</span> <span class="token operator">...</span>x<span class="token punctuation">,</span> <span class="token operator">...</span>y<span class="token punctuation">,</span> <span class="token operator">...</span>z <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// any</span>
<span class="token punctuation">}</span>

<span class="token comment">// Functions with unknown return type don't need return expressions</span>

<span class="token keyword">function</span> <span class="token function">f27</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">unknown</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token comment">// Rest type cannot be created from unknown</span>

<span class="token keyword">function</span> <span class="token function">f28</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token punctuation">{</span> <span class="token operator">...</span>a <span class="token punctuation">}</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>  <span class="token comment">// Error</span>
<span class="token punctuation">}</span>

<span class="token comment">// Class properties of type unknown don't need definite assignment</span>

<span class="token keyword">class</span> <span class="token class-name"><span class="token constant">C1</span></span> <span class="token punctuation">{</span>
    a<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>  <span class="token comment">// Error</span>
    b<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">;</span>
    c<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br></div></div><h2 id="在jsx里支持defaultprops"><a href="#在jsx里支持defaultprops" class="header-anchor">#</a> 在JSX里支持<code>defaultProps</code></h2> <p>TypeScript 2.9和之前的版本不支持在JSX组件里使用<a href="https://reactjs.org/docs/typechecking-with-proptypes.html#default-prop-values" target="_blank" rel="noopener noreferrer">React的<code>defaultProps</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>声明。 用户通常不得不将属性声明为可选的，然后在<code>render</code>里使用非<code>null</code>的断言，或者在导出之前对组件的类型使用类型断言。</p> <p>TypeScript 3.0在<code>JSX</code>命名空间里支持一个新的类型别名<code>LibraryManagedAttributes</code>。 这个助手类型定义了在检查JSX表达式之前在组件<code>Props</code>上的一个类型转换；因此我们可以进行定制：如何处理提供的<code>props</code>与推断<code>props</code>之间的冲突，推断如何映射，如何处理可选性以及不同位置的推断如何结合在一起。</p> <p>我们可以利用它来处理React的<code>defaultProps</code>以及<code>propTypes</code>。</p> <div class="language-text line-numbers-mode"><pre class="language-text"><code>export interface Props {
    name: string;
}

export class Greet extends React.Component&amp;lt;Props&gt; {
    render() {
        const { name } = this.props;
        return &amp;lt;div&gt;Hello {name.toUpperCase()}!&amp;lt;/div&gt;;
    }
    static defaultProps = { name: &quot;world&quot;};
}

// Type-checks! No type assertions needed!
let el = &amp;lt;Greet /&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="说明"><a href="#说明" class="header-anchor">#</a> 说明</h3> <h4 id="defaultprops的确切类型"><a href="#defaultprops的确切类型" class="header-anchor">#</a> <code>defaultProps</code>的确切类型</h4> <p>默认类型是从<code>defaultProps</code>属性的类型推断而来。如果添加了显式的类型注释，比如<code>static defaultProps: Partial&lt;Props&gt;;</code>，编译器无法识别哪个属性具有默认值（因为<code>defaultProps</code>类型包含了<code>Props</code>的所有属性）。</p> <p>使用<code>static defaultProps: Pick&lt;Props, &quot;name&quot;&gt;;</code>做为显式的类型注释，或者不添加类型注释。</p> <p>对于函数组件（之前叫做SFC），使用ES2015默认的初始化器：</p> <div class="language-text line-numbers-mode"><pre class="language-text"><code>function Greet({ name = &quot;world&quot; }: Props) {
    return &amp;lt;div&gt;Hello {name.toUpperCase()}!&amp;lt;/div&gt;;
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="types-react的改动"><a href="#types-react的改动" class="header-anchor">#</a> <code>@types/React</code>的改动</h4> <p>仍需要在<code>@types/React</code>里<code>JSX</code>命名空间上添加<code>LibraryManagedAttributes</code>定义。</p> <h2 id="reference-lib-指令"><a href="#reference-lib-指令" class="header-anchor">#</a> <code>/// &lt;reference lib=&quot;...&quot; /&gt;</code>指令</h2> <p>TypeScript增加了一个新的三斜线指令（<code>/// &lt;reference lib=&quot;name&quot; /&gt;</code>），允许一个文件显式地包含一个已知的内置_lib_文件。</p> <p>内置的_lib_文件的引用和_tsconfig.json_里的编译器选项<code>&quot;lib&quot;</code>相同（例如，使用<code>lib=&quot;es2015&quot;</code>而不是<code>lib=&quot;lib.es2015.d.ts&quot;</code>等）。</p> <p>当你写的声明文件依赖于内置类型时，例如DOM APIs或内置的JS运行时构造函数如<code>Symbol</code>或<code>Iterable</code>，推荐使用三斜线引用指令。之前，这个<code>.d.ts</code>文件不得不添加重覆的类型声明。</p> <h3 id="例子-5"><a href="#例子-5" class="header-anchor">#</a> 例子</h3> <p>在某个文件里使用 <code>/// &lt;reference lib=&quot;es2017.string&quot; /&gt;</code>等同于指定<code>--lib es2017.string</code>编译选项。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">/// &lt;reference lib=&quot;es2017.string&quot; /&gt;</span>

<span class="token string">&quot;foo&quot;</span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/xu-ux/x-blog/edit/master/docs/blogs/Typescript/release-notes/typescript-3.0.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">9/7/2021, 14:33:12</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/x-blog/blogs/Typescript/release-notes/typescript-2.9.html" class="prev">
        TypeScript 2.9
      </a></span> <span class="next"><a href="/x-blog/blogs/Typescript/release-notes/typescript-3.1.html">
        TypeScript 3.1
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/x-blog/assets/js/app.9c68ef6c.js" defer></script><script src="/x-blog/assets/js/19.464eb243.js" defer></script><script src="/x-blog/assets/js/1.9c3441ec.js" defer></script><script src="/x-blog/assets/js/2.c1e8940e.js" defer></script><script src="/x-blog/assets/js/118.73455c6e.js" defer></script>
  </body>
</html>
