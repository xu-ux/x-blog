(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{447:function(s,n,a){s.exports=a.p+"assets/img/image-20210903104605852.91c40e1c.png"},448:function(s,n,a){s.exports=a.p+"assets/img/image-20210903104516765.8aa4a96a.png"},620:function(s,n,a){"use strict";a.r(n);var t=a(30),e=Object(t.a)({},(function(){var s=this,n=s.$createElement,t=s._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"github-actions功能实现vuepress项目push后自动部署到github-page"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#github-actions功能实现vuepress项目push后自动部署到github-page"}},[s._v("#")]),s._v(" Github Actions功能实现Vuepress项目push后自动部署到Github Page")]),s._v(" "),t("blockquote",[t("p",[s._v("插件市场：https://github.com/marketplace?type=actions")]),s._v(" "),t("p",[t("code",[s._v("peaceiris/actions-gh-pages@v3")]),s._v(" 插件配置见 https://github.com/peaceiris/actions-gh-pages")])]),s._v(" "),t("h2",{attrs:{id:"使用github-actions"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用github-actions"}},[s._v("#")]),s._v(" 使用Github Actions")]),s._v(" "),t("p",[s._v("点击要使用仓库"),t("code",[s._v("x-blog")]),s._v("的Actions，选择设置一种workflow模板。")]),s._v(" "),t("p",[s._v("选择Node.js的模板\n选择后配置相关动作和流程，然后提交就可以了。提交后会在仓库中生成"),t("code",[s._v("./github/workflows/xxx.yml")]),s._v("文件以后每次执行配置的动作就可以自动执行配置的流程\n")]),s._v(" "),t("h3",{attrs:{id:"推荐配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#推荐配置"}},[s._v("#")]),s._v(" 推荐配置")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("name: github pages\n\non:\n  push:\n    branches:\n    - master\n\njobs:\n  build-deploy:\n    runs-on: ubuntu-latest\n    steps:\n    - uses: actions/checkout@v1\n    - run: "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" ci "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 相当于npm install")]),s._v("\n    - run: "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run docs:build\n\n    - name: Deploy\n      uses: peaceiris/actions-gh-pages@v3\n      with:\n      \tpersonal_token: "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${{ secrets.ACCESS_TOKEN }")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      \texternal_repository: xu-ux/x-blog\n      \tpublish_branch: pages\n      \tpublish_dir: docs/.vuepress/dist\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br")])]),t("h3",{attrs:{id:"解析"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解析"}},[s._v("#")]),s._v(" 解析")]),s._v(" "),t("p",[t("code",[s._v("peaceiris/actions-gh-pages@v3")]),s._v(" 插件配置见 https://github.com/peaceiris/actions-gh-pages")]),s._v(" "),t("ol",[t("li",[s._v("当push文件到仓库上的master分支时触发流程。")]),s._v(" "),t("li",[s._v("使用"),t("code",[s._v("actions/checkout@v1")]),s._v("插件拉取代码。并下载依赖包npm install和打包项目npm run build。")]),s._v(" "),t("li",[s._v("使用"),t("code",[s._v("peaceiris/actions-gh-pages@v3")]),s._v("插件发布到相关仓库中")])]),s._v(" "),t("h3",{attrs:{id:"个人配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#个人配置"}},[s._v("#")]),s._v(" 个人配置")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("name: Deploy Github Pages\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在master分支发生push事件时触发。")]),s._v("\non:\n  push:\n    branches:\n      - master\n      \njobs: "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 工作流")]),s._v("\n  build:\n    runs-on: ubuntu-latest "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#运行在虚拟机环境ubuntu-latest")]),s._v("\n\n    strategy:\n      matrix:\n        node-version: "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(".x"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v1 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用的动作。格式：userName/repoName。作用：检出仓库，获取源码。 官方actions库：https://github.com/actions")]),s._v("\n        \n      - name: Use Node.js "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${{ matrix.node-version }")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        uses: actions/setup-node@v1 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 作用：安装nodejs")]),s._v("\n        with:\n          node-version: "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${{ matrix.node-version }")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n      - name: Install\n        run: "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n\n      - name: Build\n        run:  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run docs:build\n\n      - name: Deploy\n        uses: peaceiris/actions-gh-pages@v3\n        with:\n          personal_token: "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${{ secrets.ACCESS_TOKEN }")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n          external_repository: xu-ux/x-blog\n          publish_branch: pages\n          publish_dir: docs/.vuepress/dist\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br")])]),t("p",[s._v("执行过程：")]),s._v(" "),t("p",[t("img",{attrs:{src:a(447),alt:"image-20210903104605852"}})]),s._v(" "),t("p",[s._v("插件市场：https://github.com/marketplace?type=actions")]),s._v(" "),t("p",[t("img",{attrs:{src:a(448),alt:"image-20210903104516765"}})])])}),[],!1,null,null,null);n.default=e.exports}}]);