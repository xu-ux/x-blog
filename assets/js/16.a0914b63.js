(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{524:function(s,t,a){"use strict";a.r(t);var n=a(30),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"通过github-action发布vuepress到github-page"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#通过github-action发布vuepress到github-page"}},[s._v("#")]),s._v(" 通过GitHub Action发布vuepress到github Page")]),s._v(" "),a("h1",{attrs:{id:"github-action-的概念"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#github-action-的概念"}},[s._v("#")]),s._v(" GitHub Action 的概念")]),s._v(" "),a("p",[s._v("Github action 可以帮助我们完成持续集成（CI）和持续部署（CD）。你可以自定义工作流程，而且你还可以引用"),a("a",{attrs:{href:"https://links.jianshu.com/go?to=https%3A%2F%2Fgithub.com%2Fmarketplace%3Ftype%3Dactions",target:"_blank",rel:"noopener noreferrer"}},[s._v("github action"),a("OutboundLink")],1),s._v(" 市场里面其他人提交的action。可以先熟悉下以下概念：")]),s._v(" "),a("ul",[a("li",[s._v("Workflow: 工作流可以让你在GitHub 上完成构建，测试，打包，发布或部署任意项目。工作流由一个或者多个job组成。workflow file 文件放在.github/workflows这个目录下面。")]),s._v(" "),a("li",[s._v("job: 工作流由一个或者多个job组成，还可以在工作流中定义job的依赖顺序。")]),s._v(" "),a("li",[s._v("Step: 是一个单独的步骤，可以是执行某一个run 命令，或者一个action。一个job里面可以包含多个step。")]),s._v(" "),a("li",[s._v("action: 是工作流中最小的可移植模块，action 可以在社区共享。action需要step里面去执行。")])]),s._v(" "),a("h1",{attrs:{id:"workflow-file-文件介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#workflow-file-文件介绍"}},[s._v("#")]),s._v(" workflow file 文件介绍")]),s._v(" "),a("p",[s._v("workflow file 文件放在.github/workflows这个目录下面。workflow 文件以"),a("a",{attrs:{href:"https://links.jianshu.com/go?to=http%3A%2F%2Fwww.ruanyifeng.com%2Fblog%2F2016%2F07%2Fyaml.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("YAML格式"),a("OutboundLink")],1),s._v(",")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("name 是workflow的名称")])]),s._v(" "),a("li",[a("p",[s._v("on: push 是触发条件，在推送的时候触发，还可以指定分支")]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("push")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("branches")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" master\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("runs-on: 是依赖虚拟环境runner")])])]),s._v(" "),a("h2",{attrs:{id:"workflow-文件示例-发布vuepress-博客到github-page"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#workflow-文件示例-发布vuepress-博客到github-page"}},[s._v("#")]),s._v(" workflow 文件示例，发布vuepress 博客到github page.")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("name: Deploy GitHub Pages\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 触发条件：在 push 到 master 分支后")]),s._v("\non:\n  push:\n    branches:\n      - master\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 任务")]),s._v("\njobs:\n  build-and-deploy:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v2\n        with:\n          persist-credentials: "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n\n      - name: "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n        run: "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" \n\n      - name: Build\n        run:  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" build\n\n      - name: Deploy\n        uses: JamesIves/github-pages-deploy-action@releases/v3\n        with:\n          ACCESS_TOKEN: "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${{ secrets.ACCESS_TOKEN }")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n          REPOSITORY_NAME: aaronTang98/aaronTang98.github.io\n          BRANCH: master\n          FOLDER: public\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br")])]),a("ul",[a("li",[s._v("上面yml的含义是")]),s._v(" "),a("li",[s._v("第一步拉取代码")]),s._v(" "),a("li",[s._v("第二步 安装")]),s._v(" "),a("li",[s._v("第三步 编译")]),s._v(" "),a("li",[s._v("第四步 发送到github page的工程和目录")])]),s._v(" "),a("h2",{attrs:{id:"secret-配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#secret-配置"}},[s._v("#")]),s._v(" secret 配置")]),s._v(" "),a("p",[s._v("这个示例需要将构建成果发到 GitHub 仓库，因此需要 GitHub 密钥。按照"),a("a",{attrs:{href:"https://links.jianshu.com/go?to=https%3A%2F%2Fhelp.github.com%2Fen%2Farticles%2Fcreating-a-personal-access-token-for-the-command-line",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方文档"),a("OutboundLink")],1),s._v("，生成一个密钥。然后，将这个密钥储存到当前仓库的"),a("code",[s._v("Settings/Secrets")]),s._v("里面。")]),s._v(" "),a("p",[s._v("上面的配置中引入了变量"),a("code",[s._v("secrets.ACCESS_TOKEN")]),s._v("，这个可以在repository里面选择settings。")]),s._v(" "),a("p",[a("img",{attrs:{src:"images.assets/20498052-2c24231e34feb538.png",alt:"img"}})]),s._v(" "),a("ol",[a("li",[s._v("在左边的菜单选择 "),a("strong",[s._v("Secrets")]),s._v(".")]),s._v(" "),a("li",[s._v("点击添加一个新的 "),a("strong",[s._v("secret")]),s._v(".")]),s._v(" "),a("li",[s._v("输入secret的"),a("strong",[s._v("名字")]),s._v("，例如：ACCESS_TOKEN")]),s._v(" "),a("li",[s._v("输入secret的"),a("strong",[s._v("值")])]),s._v(" "),a("li",[s._v("点击"),a("strong",[s._v("Add secret")]),s._v(".")])]),s._v(" "),a("Vssue",{attrs:{title:"发布vuepress到GithubPage"}})],1)}),[],!1,null,null,null);t.default=e.exports}}]);